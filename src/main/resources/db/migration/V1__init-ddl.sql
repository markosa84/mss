create table appointment (appointment_id int4 generated by default as identity, end_date timestamp, start_date timestamp, area_of_expertise_id int4, client_id int4, doctor_id int4, status_id int4, primary key (appointment_id));
create table appointment_status (status_id int4 generated by default as identity, status varchar(255), primary key (status_id));
create table area_of_expertise (area_of_expertise_id int4 generated by default as identity, description varchar(255), name varchar(255), primary key (area_of_expertise_id));
create table day_of_week (day_of_week_id int4 generated by default as identity, day_name varchar(255) not null, primary key (day_of_week_id));
create table doctors_working_hours (working_hours_day_id int4 generated by default as identity, end_time time, start_time time, area_id int4, day_of_week_id int4, doctor_id int4, primary key (working_hours_day_id));
create table gender (gender_id int4 generated by default as identity, gender varchar(255), primary key (gender_id));
create table language (language_id int4 generated by default as identity, name varchar(255), primary key (language_id));
create table mss_user_to_area_of_expertise (user_id int4 not null, area_of_expertise_id int4 not null);
create table mss_user_to_language (user_id int4 not null, language_id int4 not null);
create table mss_user (dtype varchar(31) not null, user_id int4 generated by default as identity, active boolean not null, email varchar(255) not null, first_name varchar(255) not null, gender int4 not null, last_name varchar(255) not null, password varchar(255) not null, phone_number varchar(255) not null, registration_date timestamp, roles varchar(255) not null, tajnumber varchar(11), date_of_birth date, mothers_name varchar(255), place_of_birth varchar(255), primary key (user_id));
create table registration_verification_code (id int4 generated by default as identity, expiry_date date, verification_code varchar(255), user_id int4 not null, primary key (id));
alter table if exists mss_user add constraint UK_pxv1kfxedppnmrjsxq1vt42j0 unique (email);
alter table if exists registration_verification_code add constraint UK_iqfuyh0qhp5a6694mp8n125ln unique (verification_code);
alter table if exists appointment add constraint FKatly3prosdb9lwr6rbxqvfi7p foreign key (area_of_expertise_id) references area_of_expertise;
alter table if exists appointment add constraint FKnxy9uwdjlqhcxp8sp5i0rnonx foreign key (client_id) references mss_user;
alter table if exists appointment add constraint FK5wj56jh9oxj3layhhg7lxvqji foreign key (doctor_id) references mss_user;
alter table if exists appointment add constraint FKaac9lclp9nagsmmkwkc7jtrqp foreign key (status_id) references appointment_status;
alter table if exists doctors_working_hours add constraint FKih5takewskhdhb31p6peknxqw foreign key (area_id) references area_of_expertise;
alter table if exists doctors_working_hours add constraint FKcv0q59faldor2rbknjom7tpsc foreign key (day_of_week_id) references day_of_week;
alter table if exists doctors_working_hours add constraint FKex0jx51iqylmmsui9qhb5qypq foreign key (doctor_id) references mss_user;
alter table if exists mss_user_to_area_of_expertise add constraint FKjdcfr9amoivnjm3buuth1cynt foreign key (area_of_expertise_id) references area_of_expertise;
alter table if exists mss_user_to_area_of_expertise add constraint FK2f5hpi7y9jsjy4xlh1aib67lr foreign key (user_id) references mss_user;
alter table if exists mss_user_to_language add constraint FK11teqrn2c2b8mj72dy5o52esu foreign key (language_id) references language;
alter table if exists mss_user_to_language add constraint FK9w0c9viyff4urhxwjx3t1u2t1 foreign key (user_id) references mss_user;
alter table if exists registration_verification_code add constraint FKpkypji19t9rbxh18wjbtc4d00 foreign key (user_id) references mss_user;